<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>GIAS DEMO</title>
  <script type="text/javascript" src="./js/GIAS.js"></script>
  <script type="text/javascript" src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
  <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=53oVIOgmSIejwV7EfphPgTynOZbIiVYu"></script>
  <script src="./js/echarts-master/dist/echarts.js"></script>
  <script src="./js/echarts-master/dist/extension/bmap.js"></script>
  <style type="text/css">
    * {
      margin: 0px;
      padding: 0px;
      font-family: "微软雅黑";
      box-sizing: border-box;
    }

    body {
      position: absolute;
      width: 100%;
      height: 100%;
    }

    .mainContainer {
      position: absolute;
      width: 100%;
      height: 100%;
      left: 0px;
      top: 0px;
      background-color: #ececec;
      z-index: 0;
    }

    .mainContainer .uploadBox {
      position: absolute;
      width: 600px;
      height: 400px;
      left: 50%;
      top: 200px;
      background-color: #fafafa;
      margin-left: -300px;
      border: 2px solid #bf0f0f;
      z-index: 2;
      display: block;
    }

    .uploadBox::before {
      content: "";
      display: table;
    }

    .uploadBox .tip {
      position: relative;
      width: 100%;
      height: 100px;
      margin-top: 60px;
    }

    .uploadBox .tip div {
      height: 100px;
      text-align: center;
      line-height: 100px;
      vertical-align: middle;
      font-size: 24px;
      color: #292929;
    }

    .uploadBox .tip div span {
      font-weight: bold;
    }


    .uploadBox .inputFile {
      position: relative;
      width: 400px;
      height: 50px;
      left: 50%;
      margin-left: -200px;
    }

    .inputFile .uploadButton {
      position: absolute;
      width: 100px;
      height: 30px;
      top: 50%;
      left: 50%;
      margin-top: -15px;
      margin-left: -50px;
      background-color: #bf0f0f;
      border-radius: 30px;
      line-height: 30px;
      vertical-align: middle;
      text-align: center;
      color: #ffffff;
      cursor: pointer;
    }

    .uploadButton:hover {
      background-color: #920000;
    }

    .mainContainer .filePreview {
      position: absolute;
      width: 1600px;
      height: 900px;
      left: 50%;
      top: 30px;
      margin-left: -800px;
      box-sizing: border-box;
      background-color: #fafafa;
      display: none;
      z-index: 1;
    }

    .filePreview .actionBar {
      position: absolute;
      width: 100%;
      height: 98px;
      top: 0px;
      border-bottom: 1px solid #bf0f0f;
    }

    .filePreview .actionBar .nextButton {
      position: absolute;
      width: 100px;
      height: 30px;
      right: 60px;
      top: 50%;
      margin-top: -15px;
      background-color: #bf0f0f;
      border-radius: 30px;
      line-height: 30px;
      vertical-align: middle;
      text-align: center;
      color: #ffffff;
      cursor: pointer;
    }

    .filePreview .actionBar .nextButton:hover {
      background-color: #920000;
    }

    .filePreview .tableContainer {
      position: absolute;
      width: 1580px;
      height: 802px;
      left: 10px;
      bottom: 0px;
      border-left: 1px solid #cecece;
      border-right: 1px solid #cecece;
    }

    .tableContainer table {
      position: absolute;
      width: 100%;
      height: 100%;
      border-collapse: collapse;
      line-height: 100%;
      vertical-align: middle;
    }

    table thead {
      width: 100%;
      height: 100px;
      top: 0px;
      left: 0px;
      border-bottom: 1px solid #cecece;
    }

    table thead tr th {
      width: 20%;
      height: 99px;
      text-align: left;
      padding-left: 4%;
      font-size: 24px;
      font-style: bold;
    }

    table thead tr th:last-child,
    table tbody tr td:last-child {
      width: 40%;
    }

    table tbody {
      position: absolute;
      width: 100%;
      height: 700px;
      left: 0px;
      top: 100px;
      overflow: auto;
    }

    table tbody tr:nth-of-type(odd) {
      background-color: #f8f8f8;
    }

    table tbody tr:nth-of-type(even) {
      background-color: #d6d6d6;
    }

    table tbody tr td {
      width: 20%;
      height: 35px;
      font-size: 14px;
      padding-left: 4%;
    }

    .mainContainer .mainView {
      position: absolute;
      width: 100%;
      height: 100%;
      left: 0px;
      top: 0px;
      display: none;
      z-index: 1;
      border-top: 4px solid #bf0f0f;
    }

    .mainView .leftLayout {
      position: absolute;
      width: 40%;
      height: 100%;
      left: 0px;
      top: 0px;
      overflow: hidden;
    }

    .leftLayout .chartContainer {
      width: 100%;
      background-color: #ececec;
      border-bottom: 1px solid #cccccc;
    }

    .mainView .rightLayout {
      position: absolute;
      width: 60%;
      height: 100%;
      right: 0px;
    }

    .rightLayout .mapContainer {
      width: 100%;
      height: 100%;
      background-color: #ececec;
      border-left: 4px solid #cccccc;
    }
  </style>

</head>

<body onload="stage01()">
  <div class="mainContainer">
    <div id="mainView" class="mainView">
      <div class="leftLayout">
        <div id="calendarHeatMap" class="chartContainer"></div>
        <div id="" class="chartContainer"></div>
        <div id="" class="chartContainer"></div>
        <div id="" class="chartContainer"></div>
        <div id="" class="chartContainer"></div>
        <div id="" class="chartContainer"></div>
      </div>
      <div class="rightLayout">
        <div id="mapContainer" class="mapContainer"></div>
      </div>
    </div>
    <div id="filePreview" class="filePreview">
      <div class="actionBar">
        <a href="" download="data.xlsx" id="hf"></a>
        <div id="nextButton" class="nextButton">下一步</div>
      </div>
      <div class="tableContainer">
        <table id="fileTable" class="fileTable"></table>
      </div>
    </div>
    <div id="uploadBox" class="uploadBox">
      <div class="tip">
        <div>点击
          <span>获取</span> 或
          <span>选择</span> 经纬度数据</div>
      </div>
      <div class="inputFile">
        <input id="fileUploader" type="file" style="position:absolute;opacity:0" />
        <div id="uploadButton" class="uploadButton">
          <span>获取</span>
        </div>
      </div>
      <div class="inputFile">
        <input id="fileSelector" type="file" style="position:absolute;opacity:0" />
        <div id="selectButton" class="uploadButton">
          <span>选择</span>
        </div>
      </div>
    </div>
    <script type="text/javascript">
      var uploadBox = document.getElementById("uploadBox");
      var fileUploader = document.getElementById("fileUploader");
      var fileSelecter = document.getElementById("fileSelecter");
      var uploadButton = document.getElementById("uploadButton");
      var selectButton = document.getElementById("selectButton");
      var filePreview = document.getElementById("filePreview");
      var mianView = document.getElementById("mainView");
      var fileTable = document.getElementById("fileTable");
      var nextButton = document.getElementById("nextButton");
      var $leftLayout = $(".leftLayout");
      var $chartContainer = $(".chartContainer");
      var $calendarHeatMap = $("#calendarHeatMap");

      function stage01() {
        uploadButton.onclick = function () {
          fileUploader.click();
        }
        fileUploader.onchange = function () {
          imFile(this, function () {
            stage02();
          });
        }
        selectButton.onclick = function () {
          fileSelector.click();
        }
        fileSelector.onchange = function () {
          imFile(this, function () {
            var tempData = [];
            for (var i = 0; i < workData.length; i++) {
              tempData[i] = {
                name: workData[i].用户名称,
                value: [workData[i].经度值, workData[i].纬度值]
              }
            }
            console.log(tempData);
            uploadBox.style.display = "none";
            mainView.style.display = "block";
            createView(tempData);
            $chartContainer.css({
              "height": $leftLayout.height() / 3 + "px"
            });
          });
        }
      }

      function stage02() {
        uploadBox.style.display = "none";
        filePreview.style.display = "block";
        displayTable();
        nextButton.onclick = function () {
          //filePreview.style.display = "none";
          //mainView.style.display = "block";
          //getGeoInfo();
          //int = setInterval("getGeoInfo()",60000);
          stage03();
        }
      }

      function stage03() {
        nextButton.click();
      }
      stage03();
    </script>
  </div>
</body>

</html>